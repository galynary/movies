{"mappings":"YAAA,IAAMA,EAAW,gCACXC,EAAW,qBACXC,EAAU,mCACVC,EAAOC,SAASC,cAAc,YAE9BC,GADWF,SAASC,cAAc,YACzBD,SAASC,cAAc,cAClCE,EAAc,EAiEdC,EAAW,IAAIC,sBAEnB,SAAgBC,EAASC,GACvBD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,gBAERC,EADAR,GAAe,GAEZS,MAAK,SAAAC,GACJd,EAAKe,mBAAmB,YAAaC,EAAaF,EAAKG,UACnDH,EAAKI,OAASJ,EAAKK,aACrBX,EAASY,UAAUjB,E,IAGtBkB,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E,SAlBpB,CACZG,KAAM,KACNC,WAAY,QACZC,UAAW,IAoBb,SAASf,I,IAAYM,EAAAU,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EAC1B,OAAOE,MAAM,GAAcC,OAAXlC,GAA+BkC,OAApBjC,EAAS,aAA2BiC,OAAhBhC,EAAQ,UAAagC,OAALb,IAAQL,MACrE,SAAAmB,GACE,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,M,IAYlB,SAASpB,EAAaqB,GACpB,OAAOA,EACJC,KACC,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAKF,EAALE,M,MACd,0DACgEV,OAArBS,EAAY,WACjDT,OAD0DU,EAAM,oBAC1DV,OAANU,EAAM,qB,IAGfC,KAAK,G,CAhBV9B,IACGC,MAAK,SAAAC,GACJd,EAAKe,mBAAmB,YAAaC,EAAaF,EAAKG,UACvDZ,EAASsC,QAAQxC,E,IAElBkB,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E","sources":["src/js/index.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3/';\nconst ENDPOINT = 'trending/movie/day';\nconst API_KEY = 'e7b77a04616bbe4184f610c6f41bfdf9';\nconst list = document.querySelector('.js-list');\nconst loadMore = document.querySelector('.js-load');\nconst target = document.querySelector('.js-guard');\nlet currentPage = 1;\n\n///---ВАРІАНТ1-----ПРОЛИТУВАННЯ ФІЛЬМІВ ЗА ДОПОМОГОЮ КНОПКИ ---LOADMORE----------------\n\n/*loadMore.addEventListener('click', onLoad);\n// --------КНОПКА ЗАВАНТАЖИТИ ЩЕ\nfunction onLoad() {\n  currentPage += 1;\n  getTrending(currentPage)\n    .then(data => {\n      list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n\n      if (data.page === data.total_pages) {\n        loadMore.hidden = true;\n      }\n    })\n    .catch(err => console.log(err));\n}\n//-----------ЗАПИТ НА ФІЛЬМИ\nfunction getTrending(page = 1) {\n  return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then(\n    resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    }\n  );\n}\n//-----ОТРИМУЄМО ВІДПОВІДЬ КОЛЕКЦІЮ ФІЛЬМІВ\ngetTrending()\n  .then(data => {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page !== data.total_pages) {\n      loadMore.hidden = false;\n    }\n  })\n  .catch(err => console.log(err));\n  \n//------РЕНДЕРИМО ФІЛЬМИ\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, title }) =>\n        `<li>\n        <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\">\n        <h2>${title}</h2>\n      </li>`\n    )\n    .join('');\n}*/\n///--------СКРОЛ------------\n/*let counter = 0;\ndocument.querySelector('scroll', onScroll);\n\nfunction onScroll() {\n  counter += 1;\n  console.log(counter);\n}*/\n///---ВАРІАНТ2-----ПРОЛИТУВАННЯ ФІЛЬМІВ ЗА ДОПОМОГОЮ СКРОЛ------------\nlet options = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 1.0,\n};\nlet observer = new IntersectionObserver(onLoad, options);\n\nfunction onLoad(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      currentPage += 1;\n      getTrending(currentPage)\n        .then(data => {\n          list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n          if (data.page !== data.total_pages) {\n            observer.unobserve(target);\n          }\n        })\n        .catch(err => console.log(err));\n    }\n  });\n}\n\nfunction getTrending(page = 1) {\n  return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then(\n    resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    }\n  );\n}\n\ngetTrending()\n  .then(data => {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    observer.observe(target);\n  })\n  .catch(err => console.log(err));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, title }) =>\n        `<li>\n        <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\">\n        <h2>${title}</h2>\n      </li>`\n    )\n    .join('');\n}\n"],"names":["$44ae6d9db4eaca0f$var$BASE_URL","$44ae6d9db4eaca0f$var$ENDPOINT","$44ae6d9db4eaca0f$var$API_KEY","$44ae6d9db4eaca0f$var$list","document","querySelector","$44ae6d9db4eaca0f$var$target","$44ae6d9db4eaca0f$var$currentPage","$44ae6d9db4eaca0f$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","$44ae6d9db4eaca0f$var$getTrending","then","data","insertAdjacentHTML","$44ae6d9db4eaca0f$var$createMarkup","results","page","total_pages","unobserve","catch","err","console","log","root","rootMargin","threshold","arguments","length","fetch","concat","resp","ok","Error","statusText","json","arr","map","param","poster_path","title","join","observe"],"version":3,"file":"index.9aeb3b9c.js.map"}